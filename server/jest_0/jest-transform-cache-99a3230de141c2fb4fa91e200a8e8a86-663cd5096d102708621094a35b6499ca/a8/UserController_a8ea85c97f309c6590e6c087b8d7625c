6e4fe65a371006829b31f452cf76a9ab
const tbl_users = require('../models/tbl_users');

const getCatch = require('../utils/getCatch');

module.exports = {
  registerUser: async (req, res) => {
    const {
      username,
      email,
      password
    } = req.body;
    const user = await tbl_users.create({
      username,
      email,
      password
    }).catch(err => getCatch(err));
    return res.json(user);
  },
  listUsers: async (req, res) => {
    const users = await tbl_users.findAll({
      raw: true
    }).catch(err => getCatch(err));
    return res.json(users);
  },
  getUser: async (req, res) => {
    const id = req.params.id;
    const user = await tbl_users.findOne({
      where: {
        id_user: id
      }
    }).catch(err => getCatch(err));
    return res.json(user);
  },
  deleteUser: async (req, res) => {
    const id = req.params.id;
    const response = await tbl_users.destroy({
      where: {
        id_user: id
      }
    }).catch(err => getCatch(err));
    return res.json(response);
  },
  updateUser: async (req, res) => {
    const id = req.params.id;
    const response = await tbl_users.findOne({
      where: {
        id_user: id
      }
    }).then(async user => {
      const response = await user.update(req.body).catch(err => getCatch(err));
      return response;
    }).catch(err => getCatch(err));
    return res.json(response);
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlVzZXJDb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbInRibF91c2VycyIsInJlcXVpcmUiLCJnZXRDYXRjaCIsIm1vZHVsZSIsImV4cG9ydHMiLCJyZWdpc3RlclVzZXIiLCJyZXEiLCJyZXMiLCJ1c2VybmFtZSIsImVtYWlsIiwicGFzc3dvcmQiLCJib2R5IiwidXNlciIsImNyZWF0ZSIsImNhdGNoIiwiZXJyIiwianNvbiIsImxpc3RVc2VycyIsInVzZXJzIiwiZmluZEFsbCIsInJhdyIsImdldFVzZXIiLCJpZCIsInBhcmFtcyIsImZpbmRPbmUiLCJ3aGVyZSIsImlkX3VzZXIiLCJkZWxldGVVc2VyIiwicmVzcG9uc2UiLCJkZXN0cm95IiwidXBkYXRlVXNlciIsInRoZW4iLCJ1cGRhdGUiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLFNBQVMsR0FBR0MsT0FBTyxDQUFDLHFCQUFELENBQXpCOztBQUNBLE1BQU1DLFFBQVEsR0FBR0QsT0FBTyxDQUFDLG1CQUFELENBQXhCOztBQUVBRSxNQUFNLENBQUNDLE9BQVAsR0FBaUI7QUFDYkMsRUFBQUEsWUFBWSxFQUFFLE9BQU1DLEdBQU4sRUFBV0MsR0FBWCxLQUFtQjtBQUM3QixVQUFNO0FBQUVDLE1BQUFBLFFBQUY7QUFBWUMsTUFBQUEsS0FBWjtBQUFtQkMsTUFBQUE7QUFBbkIsUUFBZ0NKLEdBQUcsQ0FBQ0ssSUFBMUM7QUFDQSxVQUFNQyxJQUFJLEdBQUcsTUFBTVosU0FBUyxDQUFDYSxNQUFWLENBQWlCO0FBQUVMLE1BQUFBLFFBQUY7QUFBWUMsTUFBQUEsS0FBWjtBQUFtQkMsTUFBQUE7QUFBbkIsS0FBakIsRUFBZ0RJLEtBQWhELENBQXNEQyxHQUFHLElBQUliLFFBQVEsQ0FBQ2EsR0FBRCxDQUFyRSxDQUFuQjtBQUNBLFdBQU9SLEdBQUcsQ0FBQ1MsSUFBSixDQUFTSixJQUFULENBQVA7QUFDSCxHQUxZO0FBTWJLLEVBQUFBLFNBQVMsRUFBRSxPQUFNWCxHQUFOLEVBQVdDLEdBQVgsS0FBbUI7QUFDMUIsVUFBTVcsS0FBSyxHQUFHLE1BQU1sQixTQUFTLENBQUNtQixPQUFWLENBQWtCO0FBQUNDLE1BQUFBLEdBQUcsRUFBRTtBQUFOLEtBQWxCLEVBQStCTixLQUEvQixDQUFxQ0MsR0FBRyxJQUFJYixRQUFRLENBQUNhLEdBQUQsQ0FBcEQsQ0FBcEI7QUFDQSxXQUFPUixHQUFHLENBQUNTLElBQUosQ0FBU0UsS0FBVCxDQUFQO0FBQ0gsR0FUWTtBQVViRyxFQUFBQSxPQUFPLEVBQUUsT0FBTWYsR0FBTixFQUFXQyxHQUFYLEtBQW1CO0FBQ3hCLFVBQU1lLEVBQUUsR0FBR2hCLEdBQUcsQ0FBQ2lCLE1BQUosQ0FBV0QsRUFBdEI7QUFDQSxVQUFNVixJQUFJLEdBQUcsTUFBTVosU0FBUyxDQUFDd0IsT0FBVixDQUFrQjtBQUFDQyxNQUFBQSxLQUFLLEVBQUM7QUFBQ0MsUUFBQUEsT0FBTyxFQUFHSjtBQUFYO0FBQVAsS0FBbEIsRUFBMENSLEtBQTFDLENBQWdEQyxHQUFHLElBQUliLFFBQVEsQ0FBQ2EsR0FBRCxDQUEvRCxDQUFuQjtBQUNBLFdBQU9SLEdBQUcsQ0FBQ1MsSUFBSixDQUFTSixJQUFULENBQVA7QUFDSCxHQWRZO0FBZWJlLEVBQUFBLFVBQVUsRUFBRSxPQUFNckIsR0FBTixFQUFXQyxHQUFYLEtBQW1CO0FBQzNCLFVBQU1lLEVBQUUsR0FBR2hCLEdBQUcsQ0FBQ2lCLE1BQUosQ0FBV0QsRUFBdEI7QUFDQSxVQUFNTSxRQUFRLEdBQUcsTUFBTTVCLFNBQVMsQ0FBQzZCLE9BQVYsQ0FBa0I7QUFBQ0osTUFBQUEsS0FBSyxFQUFFO0FBQUNDLFFBQUFBLE9BQU8sRUFBRUo7QUFBVjtBQUFSLEtBQWxCLEVBQTBDUixLQUExQyxDQUFnREMsR0FBRyxJQUFJYixRQUFRLENBQUNhLEdBQUQsQ0FBL0QsQ0FBdkI7QUFDQSxXQUFPUixHQUFHLENBQUNTLElBQUosQ0FBU1ksUUFBVCxDQUFQO0FBQ0gsR0FuQlk7QUFvQmJFLEVBQUFBLFVBQVUsRUFBRSxPQUFNeEIsR0FBTixFQUFXQyxHQUFYLEtBQW1CO0FBQzNCLFVBQU1lLEVBQUUsR0FBR2hCLEdBQUcsQ0FBQ2lCLE1BQUosQ0FBV0QsRUFBdEI7QUFDQSxVQUFNTSxRQUFRLEdBQUcsTUFBTTVCLFNBQVMsQ0FBQ3dCLE9BQVYsQ0FBa0I7QUFBQ0MsTUFBQUEsS0FBSyxFQUFFO0FBQUNDLFFBQUFBLE9BQU8sRUFBRUo7QUFBVjtBQUFSLEtBQWxCLEVBQTBDUyxJQUExQyxDQUErQyxNQUFNbkIsSUFBTixJQUFhO0FBQy9FLFlBQU1nQixRQUFRLEdBQUcsTUFBTWhCLElBQUksQ0FBQ29CLE1BQUwsQ0FBWTFCLEdBQUcsQ0FBQ0ssSUFBaEIsRUFBc0JHLEtBQXRCLENBQTRCQyxHQUFHLElBQUliLFFBQVEsQ0FBQ2EsR0FBRCxDQUEzQyxDQUF2QjtBQUNBLGFBQU9hLFFBQVA7QUFDSCxLQUhzQixFQUdwQmQsS0FIb0IsQ0FHZEMsR0FBRyxJQUFJYixRQUFRLENBQUNhLEdBQUQsQ0FIRCxDQUF2QjtBQUlBLFdBQU9SLEdBQUcsQ0FBQ1MsSUFBSixDQUFTWSxRQUFULENBQVA7QUFDSDtBQTNCWSxDQUFqQiIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHRibF91c2VycyA9IHJlcXVpcmUoJy4uL21vZGVscy90YmxfdXNlcnMnKVxyXG5jb25zdCBnZXRDYXRjaCA9IHJlcXVpcmUoJy4uL3V0aWxzL2dldENhdGNoJylcclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgcmVnaXN0ZXJVc2VyOiBhc3luYyhyZXEsIHJlcykgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgdXNlcm5hbWUsIGVtYWlsLCBwYXNzd29yZCB9ID0gcmVxLmJvZHlcclxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgdGJsX3VzZXJzLmNyZWF0ZSh7IHVzZXJuYW1lLCBlbWFpbCwgcGFzc3dvcmQgfSkuY2F0Y2goZXJyID0+IGdldENhdGNoKGVycikpXHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKHVzZXIpXHJcbiAgICB9LFxyXG4gICAgbGlzdFVzZXJzOiBhc3luYyhyZXEsIHJlcykgPT4ge1xyXG4gICAgICAgIGNvbnN0IHVzZXJzID0gYXdhaXQgdGJsX3VzZXJzLmZpbmRBbGwoe3JhdzogdHJ1ZX0pLmNhdGNoKGVyciA9PiBnZXRDYXRjaChlcnIpKVxyXG4gICAgICAgIHJldHVybiByZXMuanNvbih1c2VycylcclxuICAgIH0sXHJcbiAgICBnZXRVc2VyOiBhc3luYyhyZXEsIHJlcykgPT4ge1xyXG4gICAgICAgIGNvbnN0IGlkID0gcmVxLnBhcmFtcy5pZFxyXG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB0YmxfdXNlcnMuZmluZE9uZSh7d2hlcmU6e2lkX3VzZXIgOiBpZH19KS5jYXRjaChlcnIgPT4gZ2V0Q2F0Y2goZXJyKSlcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24odXNlcilcclxuICAgIH0sXHJcbiAgICBkZWxldGVVc2VyOiBhc3luYyhyZXEsIHJlcykgPT4ge1xyXG4gICAgICAgIGNvbnN0IGlkID0gcmVxLnBhcmFtcy5pZFxyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGJsX3VzZXJzLmRlc3Ryb3koe3doZXJlOiB7aWRfdXNlcjogaWR9fSkuY2F0Y2goZXJyID0+IGdldENhdGNoKGVycikpXHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKHJlc3BvbnNlKVxyXG4gICAgfSxcclxuICAgIHVwZGF0ZVVzZXI6IGFzeW5jKHJlcSwgcmVzKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaWQgPSByZXEucGFyYW1zLmlkXHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0YmxfdXNlcnMuZmluZE9uZSh7d2hlcmU6IHtpZF91c2VyOiBpZH19KS50aGVuKGFzeW5jIHVzZXIgPT57XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdXNlci51cGRhdGUocmVxLmJvZHkpLmNhdGNoKGVyciA9PiBnZXRDYXRjaChlcnIpKVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2VcclxuICAgICAgICB9KS5jYXRjaChlcnIgPT4gZ2V0Q2F0Y2goZXJyKSlcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24ocmVzcG9uc2UpXHJcbiAgICB9XHJcbn0iXX0=